---
phase: 02-product-showcase
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/lib/components/FlavorCard.svelte
  - src/lib/components/MegaSpiceCard.svelte
  - src/lib/components/WhereToBuy.svelte
  - src/routes/products/+page.svelte
autonomous: false

must_haves:
  truths:
    - "User sees all 5 flavors with name, description, heat level, and distinct color treatment"
    - "MEGA SPICE card has flame emoji decorations and heat shimmer that activate on hover"
    - "Scrolling down the products page triggers staggered entrance animations on flavor cards"
    - "Hovering product cards triggers a bouncy cheese-stretch scale effect"
    - "A where-to-buy section explains how to order Tim's cheese"
    - "MEGA SPICE feels dramatically more animated and intense than the other 4 flavors"
  artifacts:
    - path: "src/lib/components/FlavorCard.svelte"
      provides: "Reusable flavor card with scroll-triggered entrance and hover stretch"
      min_lines: 40
    - path: "src/lib/components/MegaSpiceCard.svelte"
      provides: "Special MEGA SPICE card with flame/melting effects on hover"
      min_lines: 60
    - path: "src/lib/components/WhereToBuy.svelte"
      provides: "Where to buy / how to order section"
      min_lines: 20
    - path: "src/routes/products/+page.svelte"
      provides: "Products page composing FlavorCard, MegaSpiceCard, and WhereToBuy"
      min_lines: 30
  key_links:
    - from: "src/lib/components/FlavorCard.svelte"
      to: "src/lib/actions/inview.ts"
      via: "use:inview action for scroll detection"
      pattern: "use:inview"
    - from: "src/lib/components/FlavorCard.svelte"
      to: "src/lib/actions/cheese-stretch.ts"
      via: "use:cheeseStretch action for hover"
      pattern: "use:cheeseStretch"
    - from: "src/lib/components/FlavorCard.svelte"
      to: "src/lib/utils/scroll-animations.ts"
      via: "getFlavorAnimation for per-flavor entrance"
      pattern: "getFlavorAnimation"
    - from: "src/routes/products/+page.svelte"
      to: "src/lib/data/flavors.ts"
      via: "imports flavors array"
      pattern: "import.*flavors.*from"
    - from: "src/lib/components/MegaSpiceCard.svelte"
      to: "tailwind.config.js"
      via: "uses animate-flame-flicker and animate-heat-shimmer classes"
      pattern: "animate-flame-flicker|animate-heat-shimmer"
---

<objective>
Build the product showcase page with animated flavor cards, MEGA SPICE special effects, and a where-to-buy section.

Purpose: This is the core deliverable of Phase 2 — the page where users experience all 5 cheese flavors with personality-driven animations. MEGA SPICE is the star with flame/melting effects. Every card bounces in on scroll and stretches on hover like pulling cheese.

Output: A fully animated products page with 5 flavor cards (4 standard + 1 MEGA SPICE special), scroll-triggered entrances, hover micro-interactions, and a where-to-buy section.
</objective>

<execution_context>
@C:\Users\Mark\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Mark\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-product-showcase/02-CONTEXT.md
@.planning/phases/02-product-showcase/02-RESEARCH.md
@.planning/phases/02-product-showcase/02-01-SUMMARY.md

Key files from Plan 01 (these MUST exist before this plan runs):
@src/lib/utils/scroll-animations.ts
@src/lib/actions/inview.ts
@src/lib/actions/cheese-stretch.ts
@src/lib/data/flavors.ts
@tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FlavorCard, MegaSpiceCard, and WhereToBuy components</name>
  <files>src/lib/components/FlavorCard.svelte, src/lib/components/MegaSpiceCard.svelte, src/lib/components/WhereToBuy.svelte</files>
  <action>
**1. FlavorCard.svelte** — Standard flavor card (used for White Cheese, Orange Spice, Mozz Pure, Cheddar is Beddar):

Props (Svelte 5 `$props()`): `flavor: Flavor`, `index: number`

Structure:
- Outer `<div>` with `use:inview` action (from `$lib/actions/inview`)
- Listen for `inview_enter` CustomEvent to set `isInView` state to true
- When `isInView` is true, render the card content with a Svelte `in:` transition using the flavor's specific animation from `getFlavorAnimation(flavor.id)` — apply the transition function and params with stagger delay (`delay: index * 100`)
- Inner card `<div>` with `use:cheeseStretch` action for hover elastic effect
- Card layout:
  - Large emoji (text-6xl) at top
  - Flavor name as h3 (font-display, text-2xl, bold) using the flavor's brand color for text (e.g., `text-nacho-600` for orange-spice)
  - Badge/tagline as rounded-full pill using flavor's color palette (light bg, dark text)
  - Description paragraph (text-gray-700)
  - Heat level bar: background track with colored fill bar, width proportional to `heatLevel/5 * 100%`
- Border color uses flavor's Tailwind color at shade 300 (e.g., `border-nacho-300`)
- Use `rounded-2xl p-8 shadow-lg border-2 bg-white` as base card styles
- Respect `prefersReducedMotion()` — if true, skip entrance transition delays and cheese-stretch

Dynamic color application: Since Tailwind classes must be statically analyzable, create a mapping object inside the component that maps flavor.color to the actual class strings. For example:
```
const colorMap: Record<string, { border: string, text: string, badgeBg: string, badgeText: string, heatBar: string }> = {
  'white-cheese': { border: 'border-white-cheese-300', text: 'text-white-cheese-700', badgeBg: 'bg-white-cheese-200', badgeText: 'text-white-cheese-700', heatBar: 'bg-white-cheese-400' },
  'nacho': { border: 'border-nacho-300', text: 'text-nacho-600', badgeBg: 'bg-nacho-200', badgeText: 'text-nacho-700', heatBar: 'bg-nacho-500' },
  'mozz': { border: 'border-mozz-300', text: 'text-mozz-600', badgeBg: 'bg-mozz-100', badgeText: 'text-mozz-700', heatBar: 'bg-mozz-500' },
  'cheddar': { border: 'border-cheddar-300', text: 'text-cheddar-600', badgeBg: 'bg-cheddar-200', badgeText: 'text-cheddar-700', heatBar: 'bg-cheddar-500' },
};
```
This ensures Tailwind's JIT can see all class names at build time.

**2. MegaSpiceCard.svelte** — Special card for MEGA SPICE (dramatically more animation):

Props: `flavor: Flavor`, `index: number`

Structure:
- Outer `<div>` with `use:inview` action
- Listen for `inview_enter` to set `isInView` to true
- Track `isHovered` state with `$state(false)`, set on mouseenter/mouseleave
- When `isInView`, render card with explosive entrance: `in:scale={{ start: 1.3, duration: 600, easing: elasticOut, opacity: 0, delay: index * 100 }}`
- Card has gradient background: `bg-gradient-to-br from-spice-400 to-spice-600` with white text
- Content layout:
  - Large fire emoji (text-6xl)
  - "MEGA SPICE" as h3 (font-display, text-3xl, bold, text-white) — bigger than other cards
  - "Face Melter" subtitle
  - Warning badge: `bg-white/30 backdrop-blur text-white` with warning emoji
  - Description paragraph (text-white/90)
  - Heat level bar: full width, white bar with `animate-pulse` when hovered
- Flame decorations (ONLY visible on hover):
  - 3 flame emojis positioned absolute above the card (-top-6)
  - Transition opacity 0 -> 100 on hover, translate up slightly (-translate-y-2)
  - Apply `animate-flame-flicker` class when hovered (from Tailwind custom animation)
  - Each flame slightly offset and different size for organic feel
- Heat shimmer overlay (ONLY on hover):
  - Absolute positioned div covering the card
  - Gradient from spice-600/50 to transparent
  - Apply `animate-heat-shimmer` when hovered
  - `pointer-events-none` so it doesn't block interaction
- Card border: `border-2 border-spice-700`
- The card should span `md:col-span-2 lg:col-span-1` in the grid (wider on tablet)
- `use:cheeseStretch` for base hover effect (in addition to flame effects)
- Respect `prefersReducedMotion()` — disable flames and shimmer

**3. WhereToBuy.svelte** — Purchase/ordering section:

No props needed (static content).

Structure:
- Outer wrapper with `use:inview` for scroll-triggered entrance
- Warm background: `bg-gradient-to-br from-nacho-100 to-cheddar-100 rounded-2xl p-8 md:p-12`
- Content:
  - h2: "Where to Get the Goods" (font-display, text-3xl, bold)
  - Subtitle paragraph explaining ordering
  - 3-column responsive grid with ordering options:
    1. **DM Us** — "Slide into our DMs on Instagram or Twitter. We'll hook you up." with social icon/emoji
    2. **Local Pickup** — "Based in SoCal? Hit us up for local pickup. Fresh from Tim's kitchen." with location emoji
    3. **Coming Soon: Online Store** — "Full online ordering dropping soon. Get on the list." with shopping emoji
  - Each option card: `bg-white rounded-xl p-6 shadow-md text-center`
  - Bottom CTA: link to /about page, styled as nacho-500 button
- Entrance animation: `in:fly={{ y: 40, duration: 500 }}` when in view

  </action>
  <verify>
Run `bun run check` — 0 errors, 0 warnings.
Run `bun run build` — succeeds.
Verify all 3 component files exist:
- `ls src/lib/components/FlavorCard.svelte`
- `ls src/lib/components/MegaSpiceCard.svelte`
- `ls src/lib/components/WhereToBuy.svelte`
  </verify>
  <done>
All 3 components exist with correct Svelte 5 syntax. FlavorCard uses inview + cheeseStretch + per-flavor transitions. MegaSpiceCard has flame/shimmer hover effects. WhereToBuy has 3 ordering options.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rebuild products page with animated components</name>
  <files>src/routes/products/+page.svelte</files>
  <action>
Replace the entire existing products page with a new version that composes the components from Task 1.

Structure:
- Import `FlavorCard` from `$lib/components/FlavorCard.svelte`
- Import `MegaSpiceCard` from `$lib/components/MegaSpiceCard.svelte`
- Import `WhereToBuy` from `$lib/components/WhereToBuy.svelte`
- Import `flavors` from `$lib/data/flavors`
- Import `inview` from `$lib/actions/inview` (for the header entrance)
- Import `fly` from `svelte/transition` and `quintOut` from `svelte/easing`

Page layout:
1. **Hero section** (scroll-triggered entrance):
   - `use:inview` on wrapper, entrance with `in:fly={{ y: -20, duration: 400 }}`
   - h1: "Our Flavors" (font-display, text-5xl md:text-6xl, bold)
   - Subtitle: "Five legendary west coast cheese flavors. From chill to thrill."
   - Center-aligned, margin-bottom for spacing

2. **Flavor grid**:
   - `grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16`
   - Separate non-star flavors from MEGA SPICE: `const regularFlavors = flavors.filter(f => !f.isStar)`
   - `const megaSpice = flavors.find(f => f.isStar)`
   - Render regularFlavors with `{#each}` using `<FlavorCard flavor={f} index={i} />`
   - Render megaSpice with `<MegaSpiceCard flavor={megaSpice} index={regularFlavors.length} />`
   - MEGA SPICE renders LAST in the grid (the finale)

3. **Where to Buy section**:
   - `<WhereToBuy />` with margin-top spacing

4. **Max width container**: `max-w-6xl mx-auto` wrapping everything

Keep the page clean and let the components handle their own animation logic. The page is a composition layer only.
  </action>
  <verify>
Run `bun run check` — 0 errors, 0 warnings.
Run `bun run build` — succeeds.
Start dev server with `bun run dev` and confirm it starts without errors on console.
  </verify>
  <done>
Products page renders all 5 flavor cards (4 regular + 1 MEGA SPICE) from the flavors data module, with the WhereToBuy section at the bottom. Build passes.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete product showcase page with:
- 5 animated flavor cards with distinct color treatments and per-flavor entrance animations
- MEGA SPICE card with flame emoji decorations and heat shimmer on hover
- Cheese-stretch (elastic scale) hover effect on all cards
- Scroll-triggered staggered card entrances
- Smooth page transitions between routes (crossfade via View Transitions API)
- Where to buy section with 3 ordering options
  </what-built>
  <how-to-verify>
1. Start the dev server: `bun run dev`
2. Open http://localhost:5173 in Chrome/Edge (View Transitions API support)
3. Navigate to the Products page — verify smooth crossfade transition
4. Scroll down slowly — watch flavor cards animate in with staggered entrances
5. Each card should have a unique entrance style (fly, scale, pop, etc.)
6. Hover over any flavor card — it should scale up slightly with an elastic bounce (cheese-stretch)
7. Hover over the MEGA SPICE card — flame emojis should appear above, heat shimmer overlay should activate
8. Move mouse away from MEGA SPICE — flames and shimmer should fade out
9. Verify MEGA SPICE feels dramatically more intense than the other 4 cards
10. Scroll to the "Where to Get the Goods" section — it should animate in
11. Check all 5 flavors have distinct color treatments (borders, text, badges)
12. Navigate between Products and other pages — transitions should be smooth crossfades
13. Try on mobile width (resize browser to < 768px) — cards should stack and still animate
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `bun run build` completes without errors
2. `bun run check` shows 0 errors, 0 warnings
3. Products page shows all 5 flavors with distinct visual identities
4. MEGA SPICE has flame/shimmer effects on hover
5. Scroll-triggered entrances work for all cards
6. Hover micro-interactions (cheese-stretch) work on cards
7. Page transitions are smooth crossfades
8. Where to buy section is present with ordering info
9. Responsive layout works on mobile widths
</verification>

<success_criteria>
- All 5 flavors visible with imagery, descriptions, and distinct color treatments
- MEGA SPICE has flame/melting effects that feel extreme and reactive
- Scrolling triggers staggered card entrance animations
- Hovering cards/buttons triggers elastic cheese-stretch effect
- Page transitions between routes are smooth crossfades
- Where to buy section tells users how to order
- User approves the visual experience at checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/02-product-showcase/02-02-SUMMARY.md`
</output>
