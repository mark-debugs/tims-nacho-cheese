---
phase: 01-foundation-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - bun.lockb
  - svelte.config.js
  - vite.config.ts
  - tsconfig.json
  - tailwind.config.js
  - postcss.config.js
  - src/app.html
  - src/app.css
  - Dockerfile
  - docker-compose.yml
  - .dockerignore
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "bun run dev starts SvelteKit dev server without errors"
    - "Docker container builds and serves the site on port 3000"
    - "Tailwind CSS classes render correctly in the browser"
  artifacts:
    - path: "package.json"
      provides: "Project manifest with SvelteKit, Bun adapter, Tailwind v3, enhanced-img"
      contains: "svelte-adapter-bun"
    - path: "svelte.config.js"
      provides: "SvelteKit config with Bun adapter and enhanced-img preprocessor"
      contains: "svelte-adapter-bun"
    - path: "Dockerfile"
      provides: "Multi-stage Docker build for Bun + SvelteKit"
      contains: "oven/bun"
    - path: "docker-compose.yml"
      provides: "Local development container orchestration"
      contains: "3000"
    - path: "tailwind.config.js"
      provides: "Tailwind v3 configuration with brand color palette"
      contains: "nacho"
  key_links:
    - from: "svelte.config.js"
      to: "svelte-adapter-bun"
      via: "adapter import"
      pattern: "import.*adapter.*svelte-adapter-bun"
    - from: "Dockerfile"
      to: "build/index.js"
      via: "ENTRYPOINT"
      pattern: "bun.*build/index.js"
    - from: "docker-compose.yml"
      to: "Dockerfile"
      via: "build context"
      pattern: "build.*\\."
---

<objective>
Scaffold the SvelteKit project with Bun runtime, configure Tailwind CSS v3, set up the Docker containerization, and establish the project foundation that all subsequent plans build on.

Purpose: Every other plan in this phase (and all future phases) depends on having a working SvelteKit project with proper tooling. This is the bedrock.
Output: A buildable, runnable SvelteKit project in a Docker container with Tailwind CSS ready for styling.
</objective>

<execution_context>
@C:\Users\Mark\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Mark\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-infrastructure/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold SvelteKit project with Bun and configure tooling</name>
  <files>
    package.json
    bun.lockb
    svelte.config.js
    vite.config.ts
    tsconfig.json
    tailwind.config.js
    postcss.config.js
    src/app.html
    src/app.css
    src/routes/+page.svelte
  </files>
  <action>
    Create a new SvelteKit project using Bun. Use `bunx sv create` with the following choices: SvelteKit minimal template, TypeScript, no additional integrations (we'll add manually).

    If `bunx sv create` requires interactive input, scaffold manually instead:
    1. Initialize with `bun init` then install SvelteKit packages directly
    2. Or use `bunx sv create . --template minimal --types ts` if non-interactive flags exist

    After scaffolding, install and configure:

    1. **Bun adapter**: `bun add -D svelte-adapter-bun`
       - Update `svelte.config.js` to use `svelte-adapter-bun` instead of adapter-auto
       - Configure: `adapter({ out: 'build' })`

    2. **Enhanced images**: `bun add -D @sveltejs/enhanced-img`
       - Add to `vite.config.ts` as a Vite plugin via `import { enhancedImages } from '@sveltejs/enhanced-img'`

    3. **Tailwind CSS v3** (NOT v4 -- Bun compatibility issues):
       `bun add -D tailwindcss@3 postcss autoprefixer`
       - Create `tailwind.config.js` with content paths: `['./src/**/*.{html,js,svelte,ts}']`
       - Define brand color palette in Tailwind extend:
         - `nacho` (primary orange): shades from 50-950, with 500 being a warm nacho cheese orange (#F59E0B or similar)
         - `spice` (red accent): for MEGA SPICE flavor (#EF4444 or similar)
         - `cheddar` (deep orange/gold): for Cheddar is Beddar (#D97706 or similar)
         - `cream` (off-white): for backgrounds (#FFF8F0 or similar)
       - Create `postcss.config.js` with tailwindcss and autoprefixer plugins

    4. **Global CSS** in `src/app.css`:
       - Tailwind directives (@tailwind base, components, utilities)
       - CSS custom properties for brand colors (mirrors Tailwind palette for use in animations)
       - Base font: system-ui stack with a fun display font import (e.g., Google Fonts Fredoka One or Baloo 2 for headings)
       - Global body: cream background, dark text, zero margin

    5. **app.html**: Standard SvelteKit template. Import app.css in the root layout, not in app.html directly.

    6. **Root route** `src/routes/+page.svelte`: Simple "Tim's Nacho Cheese" heading with a subheading like "The cheesiest site on the internet" -- just enough to verify the app renders. Use Tailwind classes.

    IMPORTANT: Use Svelte 5 syntax throughout:
    - `$state()` not `let` for reactive vars
    - `$derived()` not `$:` for computed values
    - `$props()` not `export let` for component props
    - `{@render children()}` not `<slot />` in layouts
  </action>
  <verify>
    Run `bun run dev` and confirm the dev server starts without errors on http://localhost:5173. Open the URL and verify the homepage renders with Tailwind styles applied (text should be styled, not raw HTML). Check browser console for zero errors.
  </verify>
  <done>
    SvelteKit dev server runs, homepage renders "Tim's Nacho Cheese" with Tailwind styling, no console errors, Svelte 5 syntax used throughout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Docker containerization with multi-stage build</name>
  <files>
    Dockerfile
    docker-compose.yml
    .dockerignore
    .gitignore
  </files>
  <action>
    Create Docker infrastructure for local development and production builds:

    1. **Dockerfile** -- Multi-stage build following the pattern from RESEARCH.md:
       - Stage 1 (base): `FROM oven/bun:1-alpine AS base`, WORKDIR /app
       - Stage 2 (install): Create /temp/dev and /temp/prod directories, copy package.json + bun.lockb, install all deps in /temp/dev, production-only deps in /temp/prod
       - Stage 3 (build): Copy node_modules from install, copy all source, run `bun --bun run build`
       - Stage 4 (release): Copy prod node_modules, copy build output, set USER bun, EXPOSE 3000/tcp, ENTRYPOINT `["bun", "./build/index.js"]`

    2. **docker-compose.yml**:
       ```yaml
       services:
         web:
           build: .
           ports:
             - "3000:3000"
           environment:
             - NODE_ENV=production
       ```

    3. **.dockerignore**:
       ```
       node_modules
       .git
       .svelte-kit
       build
       .DS_Store
       *.log
       coverage
       .env
       .env.*
       !.env.example
       .planning
       ```

    4. **.gitignore** -- Ensure it includes standard SvelteKit ignores:
       - node_modules, .svelte-kit, build, .env, .env.*, .DS_Store
       - Do NOT add .planning to .gitignore (planning docs are committed)

    5. **Verify the Docker build**: Run `docker compose build` and then `docker compose up -d`. Confirm the container starts and the site is accessible on http://localhost:3000. Then `docker compose down` to clean up.
  </action>
  <verify>
    Run `docker compose build` -- should complete without errors. Run `docker compose up -d` and verify http://localhost:3000 returns the homepage. Run `docker compose down` to stop. Total image size should be under 200MB.
  </verify>
  <done>
    Docker container builds successfully, serves the SvelteKit app on port 3000, and the image is reasonably sized (under 200MB). docker-compose.yml provides one-command local startup.
  </done>
</task>

</tasks>

<verification>
1. `bun run dev` starts dev server at localhost:5173 without errors
2. `bun run build` completes without errors
3. `docker compose build && docker compose up -d` serves site at localhost:3000
4. Browser shows styled "Tim's Nacho Cheese" page (Tailwind working)
5. No console errors in browser dev tools
</verification>

<success_criteria>
- SvelteKit project scaffolded with Bun runtime, TypeScript, Svelte 5
- svelte-adapter-bun configured in svelte.config.js
- Tailwind CSS v3 installed and rendering styles
- Brand color palette defined (nacho orange, spice red, cheddar gold, cream)
- Docker multi-stage build creates working production container
- Site accessible on port 3000 via Docker, port 5173 via dev server
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-infrastructure/01-01-SUMMARY.md`
</output>
