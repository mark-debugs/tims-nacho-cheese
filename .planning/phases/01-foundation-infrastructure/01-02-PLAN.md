---
phase: 01-foundation-infrastructure
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/routes/+layout.svelte
  - src/routes/+layout.ts
  - src/routes/+page.svelte
  - src/routes/products/+page.svelte
  - src/routes/blog/+page.svelte
  - src/routes/merch/+page.svelte
  - src/routes/about/+page.svelte
  - src/lib/components/Nav.svelte
  - src/lib/components/MobileDrawer.svelte
  - src/lib/components/Footer.svelte
  - src/lib/utils/animations.ts
autonomous: true

must_haves:
  truths:
    - "User can click Products, Blog, Merch, About links and navigate to each page"
    - "Navigation bar hides when scrolling down and reappears when scrolling up"
    - "On mobile (<768px), hamburger menu opens a slide-out drawer with navigation links"
    - "Site layout is responsive across phone, tablet, and desktop widths"
    - "Animation utility functions are importable and produce bouncy spring/tween effects"
  artifacts:
    - path: "src/lib/components/Nav.svelte"
      provides: "Desktop navigation bar with hide-on-scroll behavior"
      min_lines: 40
    - path: "src/lib/components/MobileDrawer.svelte"
      provides: "Mobile slide-out navigation drawer"
      min_lines: 30
    - path: "src/routes/+layout.svelte"
      provides: "Root layout with nav integration and responsive switching"
      min_lines: 20
    - path: "src/lib/utils/animations.ts"
      provides: "Reusable animation utilities for bouncy cheese-themed effects"
      exports: ["bouncySpring", "smoothTween", "elasticBounce"]
    - path: "src/routes/products/+page.svelte"
      provides: "Products placeholder page"
    - path: "src/routes/blog/+page.svelte"
      provides: "Blog placeholder page"
    - path: "src/routes/merch/+page.svelte"
      provides: "Merch placeholder page"
    - path: "src/routes/about/+page.svelte"
      provides: "About placeholder page"
  key_links:
    - from: "src/routes/+layout.svelte"
      to: "src/lib/components/Nav.svelte"
      via: "component import"
      pattern: "import Nav from.*Nav\\.svelte"
    - from: "src/routes/+layout.svelte"
      to: "src/lib/components/MobileDrawer.svelte"
      via: "component import"
      pattern: "import MobileDrawer from.*MobileDrawer\\.svelte"
    - from: "src/lib/components/Nav.svelte"
      to: "src/routes/products/+page.svelte"
      via: "anchor href"
      pattern: "href=.*/products"
    - from: "src/lib/components/Nav.svelte"
      to: "window.scrollY"
      via: "scroll event listener"
      pattern: "scroll.*scrollY|addEventListener.*scroll"
    - from: "src/lib/utils/animations.ts"
      to: "svelte/motion"
      via: "spring and tweened imports"
      pattern: "import.*spring|tweened.*from.*svelte/motion"
---

<objective>
Build the complete navigation system (desktop hide-on-scroll + mobile drawer), create all 4 route placeholder pages, establish the responsive root layout, and create the animation utilities module with bouncy cheese-themed presets.

Purpose: This delivers the navigable skeleton that users can click through. After this plan, the site feels like a real app -- you can browse between pages, the nav behaves smartly on scroll, mobile has a proper drawer, and animation primitives are ready for Phase 2's complex effects.
Output: A fully navigable, responsive SvelteKit app with 5 routes (home + 4 sections) and animation utilities.
</objective>

<execution_context>
@C:\Users\Mark\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Mark\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-infrastructure/01-CONTEXT.md
@.planning/phases/01-foundation-infrastructure/01-RESEARCH.md
@.planning/phases/01-foundation-infrastructure/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create navigation components, root layout, and route pages</name>
  <files>
    src/lib/components/Nav.svelte
    src/lib/components/MobileDrawer.svelte
    src/lib/components/Footer.svelte
    src/routes/+layout.svelte
    src/routes/+layout.ts
    src/routes/+page.svelte
    src/routes/products/+page.svelte
    src/routes/blog/+page.svelte
    src/routes/merch/+page.svelte
    src/routes/about/+page.svelte
  </files>
  <action>
    Build the navigation and page structure following the locked decisions from CONTEXT.md.

    **Nav.svelte (Desktop -- visible at 768px+):**
    - Bold full-width design that feels like a storefront sign -- big brand logo/text on left, chunky navigation links on right
    - Brand name "Tim's Nacho Cheese" in display font, nacho-orange color, generous sizing
    - 4 links: Products, Blog, Merch, About -- styled bold, uppercase or title case, with generous spacing
    - Hide on scroll down, show on scroll up: Use scroll event listener with passive flag
      - Track `lastScrollY` and `currentScrollY`
      - Show nav when scrolling up OR when near top (scrollY < 50)
      - Use `svelte/transition` `fly` with y=-100 for smooth enter/exit (not jarring)
    - Fixed position at top, full width, z-index high enough to sit above content
    - Background: solid nacho-orange or cream with orange accent -- should feel warm and inviting
    - Active link highlighting using SvelteKit's `$page.url.pathname`
    - Use Svelte 5 `$state()` for reactive scroll tracking

    **MobileDrawer.svelte (visible below 768px):**
    - Hamburger button in a sticky/fixed header bar (shows brand name + hamburger icon)
    - Slide-out drawer from the left side, full height
    - Backdrop overlay (semi-transparent dark) that closes drawer on click
    - Drawer uses `fly` transition with x=-300, duration 300ms, quintOut easing
    - Backdrop uses `fade` transition
    - Same 4 links as desktop, styled big and tappable (min 48px touch target)
    - Bold full-width style matching desktop nav personality
    - Closes drawer after clicking a link (navigate and close)
    - Use Svelte 5 `$state()` for drawer open state

    **Footer.svelte:**
    - Simple footer with brand name, copyright year, and placeholder social links
    - Warm, on-brand styling (cream/orange tones)
    - Responsive: stacks vertically on mobile, horizontal on desktop

    **+layout.svelte (Root Layout):**
    - Import app.css for global styles
    - Responsive nav switching: show Nav on 768px+, show MobileDrawer below 768px
    - Use `svelte:window bind:innerWidth` to track viewport width
    - Use `$state()` for innerWidth, `$derived()` for isMobile check
    - Render children with `{@render children()}`
    - Include Footer after main content
    - Main content area: responsive padding (1rem mobile, 2rem tablet, 3rem desktop)
    - Max-width container centered on large screens (1280px)

    **+layout.ts:**
    - Export `prerender = false` (we want SSR for production, not static)

    **Route Pages (placeholder content for each):**
    Each page should have enough content to test scrolling and demonstrate the nav hide/show behavior. Use Tailwind classes throughout.

    - **+page.svelte (Home):** Hero-style section with "Tim's Nacho Cheese" large heading, tagline "The cheesiest site on the internet", warm orange gradient background, playful vibe. Add a few sections of placeholder content (feature cards, etc.) so the page scrolls enough to test nav behavior.

    - **products/+page.svelte:** "Our Flavors" heading, grid of 5 placeholder cards (one per flavor: White Cheese, Orange Cheese with Spice, Mozz Pure, Cheddar is Beddar, MEGA SPICE). Each card: flavor name, brief placeholder description, colored accent that hints at future visual identity. Enough content to scroll.

    - **blog/+page.svelte:** "Blog" heading, 3-4 placeholder blog post cards with fake titles like "The Perfect Nachos", "Tim's Surf Trip", "MEGA SPICE Challenge". Each card: title, date, excerpt placeholder.

    - **merch/+page.svelte:** "Merch" heading, grid of placeholder merch items (T-shirt, Hoodie, Skate Deck, Stickers, Hat). Each item: name, "Coming Soon" badge.

    - **about/+page.svelte:** "About Tim" heading, placeholder bio section about Tim (skateboarder, tattooed, west coast, chill vibes, checkered Vans). A few paragraphs of placeholder text that captures the brand personality.

    IMPORTANT Svelte 5 reminders:
    - Use `$state()` for all reactive variables
    - Use `$derived()` for computed values
    - Use `$props()` for component props
    - Use `{@render children()}` in layout, not `<slot />`
    - Use `onclick` not `on:click` for event handlers in Svelte 5
  </action>
  <verify>
    1. Run `bun run dev` and open http://localhost:5173
    2. Verify all 5 pages render: /, /products, /blog, /merch, /about
    3. Click each nav link and confirm navigation works (URL changes, content updates)
    4. Scroll down on any page -- nav should hide. Scroll up -- nav should reappear smoothly.
    5. Resize browser below 768px -- hamburger menu appears. Click it -- drawer slides out. Click a link -- navigates and drawer closes.
    6. No console errors or warnings about deprecated Svelte 4 syntax.
  </verify>
  <done>
    All 5 routes are navigable via both desktop nav and mobile drawer. Nav hides on scroll down and shows on scroll up with smooth fly transition. Mobile drawer slides in from left with backdrop. All pages have placeholder content with enough scroll height to test nav behavior. Zero Svelte deprecation warnings.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create animation utilities module with bouncy cheese-themed presets</name>
  <files>
    src/lib/utils/animations.ts
  </files>
  <action>
    Create a centralized animation utilities module that provides consistent, reusable animation primitives for the bouncy, cheese-themed aesthetic. This module will be the foundation for all animations in Phase 2 and beyond.

    **src/lib/utils/animations.ts:**

    Export the following animation factories and constants:

    1. **Spring presets** (using `spring` from `svelte/motion`):
       - `bouncySpring(initial)` -- High bounce, low damping. For hover effects, card interactions. Stiffness ~0.1, damping ~0.25.
       - `gentleSpring(initial)` -- Subtle bounce. For nav show/hide, layout shifts. Stiffness ~0.05, damping ~0.4.
       - `snappySpring(initial)` -- Quick snap with slight overshoot. For button clicks, toggles. Stiffness ~0.3, damping ~0.6.

    2. **Tweened presets** (using `tweened` from `svelte/motion`):
       - `smoothTween(initial)` -- Smooth ease-out. Duration 400ms, quintOut easing.
       - `elasticBounce(initial)` -- Elastic overshoot. Duration 600ms, elasticOut easing.
       - `quickFade(initial)` -- Fast opacity transition. Duration 200ms, linear easing.

    3. **Transition parameter presets** (plain objects for use with svelte/transition):
       - `flyUp` -- `{ y: -20, duration: 300, easing: quintOut }` for elements entering from above
       - `flyDown` -- `{ y: 20, duration: 300, easing: quintOut }` for elements entering from below
       - `scaleIn` -- `{ start: 0.8, duration: 300, easing: elasticOut }` for elements scaling in
       - `fadeSlide` -- `{ y: 10, duration: 200, easing: quintOut }` for subtle slide-fade entries

    4. **Brand animation constants:**
       - `ANIMATION_DURATION` object with `fast: 150`, `normal: 300`, `slow: 500`, `bouncy: 600`
       - `SPRING_CONFIGS` object with named configs (bouncy, gentle, snappy) as raw `{stiffness, damping}` objects for direct use

    5. **Utility function:**
       - `prefersReducedMotion(): boolean` -- Returns true if user prefers reduced motion (reads `window.matchMedia('(prefers-reduced-motion: reduce')`). Used by components to disable/simplify animations for accessibility.

    All exports should be properly typed with TypeScript. Import easing functions from `svelte/easing` (quintOut, elasticOut, cubicOut). Import spring/tweened from `svelte/motion`.

    Do NOT import `onMount` or any Svelte lifecycle functions in this utility file -- it should be pure functions and store factories that can be imported anywhere.
  </action>
  <verify>
    1. Run `bun run check` (or `bunx svelte-check`) to verify TypeScript compiles without errors
    2. Verify the file exports are importable: create a temporary test in any +page.svelte that imports `bouncySpring` and `ANIMATION_DURATION` from `$lib/utils/animations` -- page should render without import errors
    3. Confirm no Svelte-specific lifecycle code in the utility file (it should work as a pure TS module)
  </verify>
  <done>
    Animation utilities module exports spring factories (bouncySpring, gentleSpring, snappySpring), tween factories (smoothTween, elasticBounce, quickFade), transition presets (flyUp, flyDown, scaleIn, fadeSlide), brand constants (ANIMATION_DURATION, SPRING_CONFIGS), and a prefersReducedMotion utility. All TypeScript, all importable from `$lib/utils/animations`.
  </done>
</task>

</tasks>

<verification>
1. Navigate to each of the 5 routes -- all render with placeholder content
2. Desktop nav: visible at top, hides on scroll down, shows on scroll up
3. Mobile nav (<768px): hamburger opens drawer, links navigate and close drawer
4. `bun run check` passes with zero type errors
5. `bun run build` succeeds (production build)
6. Animation utilities importable and typed correctly
7. Responsive layout adjusts at 768px, 1024px, 1280px breakpoints
</verification>

<success_criteria>
- 5 routes with placeholder content (/, /products, /blog, /merch, /about)
- Desktop nav with hide-on-scroll, bold storefront-sign styling
- Mobile drawer with fly transition, backdrop, big tappable links
- Root layout with responsive nav switching at 768px breakpoint
- Animation utilities module with 6+ exported functions/presets
- prefersReducedMotion accessibility utility exported
- Zero TypeScript errors, zero Svelte deprecation warnings
- Production build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-infrastructure/01-02-SUMMARY.md`
</output>
